# 生产环境配置示例

# ====================================
# 数据库配置
# ====================================
DATABASE_URL=postgres://ironforge:your_secure_password@production-db.example.com:26257/ironforge?sslmode=require
DATABASE_MAX_CONNECTIONS=20
DATABASE_CONNECT_TIMEOUT_SECS=10
DATABASE_IDLE_TIMEOUT_SECS=600

# ====================================
# Redis 配置
# ====================================
REDIS_URL=redis://production-redis.example.com:6379
REDIS_MAX_CONNECTIONS=10

# ====================================
# Immudb 审计配置
# ====================================
IMMUDB_ADDR=production-immudb.example.com:3322
IMMUDB_USER=ironforge
IMMUDB_PASSWORD=your_immudb_password
IMMUDB_DATABASE=ironforge_audit

# ====================================
# JWT 配置（生产环境必须修改！）
# ====================================
# 生成强密钥: openssl rand -base64 32
JWT_SECRET=CHANGE_THIS_TO_RANDOM_32_BYTE_BASE64_STRING
JWT_TOKEN_EXPIRY_SECS=3600
JWT_REFRESH_EXPIRY_SECS=2592000

# ====================================
# 服务器配置
# ====================================
SERVER_BIND_ADDR=0.0.0.0:8088
SERVER_ALLOW_DEGRADED_START=false
SERVER_GRACEFUL_SHUTDOWN_SECS=30

# ====================================
# 日志配置
# ====================================
RUST_LOG=info,ironforge_backend=debug
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_ENABLED=true
LOG_FILE_PATH=/var/log/ironforge/backend.log
LOG_FILE_MAX_SIZE_MB=100
LOG_FILE_MAX_AGE_DAYS=30

# ====================================
# 监控配置
# ====================================
PROMETHEUS_ENABLED=true
PROMETHEUS_BIND_ADDR=0.0.0.0:9090
HEALTH_CHECK_ENABLED=true

# ====================================
# 区块链 RPC 端点
# ====================================
# Ethereum
ETH_RPC_URL=https://eth-mainnet.g.alchemy.com/v2/YOUR_API_KEY
ETH_RPC_BACKUP=https://rpc.ankr.com/eth

# BSC
BSC_RPC_URL=https://bsc-dataseed1.binance.org
BSC_RPC_BACKUP=https://bsc-dataseed2.binance.org

# Polygon
POLYGON_RPC_URL=https://polygon-rpc.com
POLYGON_RPC_BACKUP=https://rpc-mainnet.matic.network

# Solana
SOLANA_RPC_URL=https://api.mainnet-beta.solana.com
SOLANA_RPC_BACKUP=https://solana-api.projectserum.com

# Bitcoin
BITCOIN_RPC_URL=https://blockstream.info/api
BITCOIN_RPC_BACKUP=https://blockchain.info

# ====================================
# 跨链桥配置
# ====================================
# Wormhole
WORMHOLE_API_KEY=your_wormhole_api_key
WORMHOLE_NETWORK=mainnet

# LayerZero (待集成)
# LAYERZERO_ENDPOINT=https://api.layerzero.network

# Axelar (待集成)
# AXELAR_RPC_URL=https://rpc.axelar.network

# 桥接费率
BRIDGE_FEE_PERCENTAGE=0.003
TRANSACTION_FEE_PERCENTAGE=0.001

# ====================================
# Gas 价格和确认数配置
# ====================================
BASELINE_GAS_PRICE=20
REQUIRED_CONFIRMATIONS=6

# ====================================
# 安全配置
# ====================================
# CORS 允许的源（生产环境限制）
CORS_ALLOWED_ORIGINS=https://app.ironforge.com,https://ironforge.com

# API Key 验证（可选）
API_KEY_REQUIRED=false

# Rate Limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST=20

# ====================================
# 价格服务配置
# ====================================
PRICE_SERVICE_UPDATE_INTERVAL_SECS=60
PRICE_CACHE_TTL_SECS=300

# CoinGecko API
COINGECKO_API_KEY=your_coingecko_api_key

# ====================================
# 通知服务配置
# ====================================
# Email (SMTP)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=notifications@ironforge.com
SMTP_PASSWORD=your_smtp_password

# Telegram Bot
TELEGRAM_BOT_TOKEN=your_telegram_bot_token

# Discord Webhook
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR_WEBHOOK

# ====================================
# 备份和恢复
# ====================================
BACKUP_ENABLED=true
BACKUP_INTERVAL_HOURS=24
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=ironforge-backups
BACKUP_S3_REGION=us-east-1

# ====================================
# 性能优化
# ====================================
# 连接池大小
DB_POOL_SIZE=20
REDIS_POOL_SIZE=10

# 缓存TTL
CACHE_TTL_SECS=300
WALLET_CACHE_TTL_SECS=600

# 工作线程数
TOKIO_WORKER_THREADS=8

# ====================================
# 开发/调试配置（生产环境应禁用）
# ====================================
# 开启 API 文档
SWAGGER_ENABLED=false

# 允许不安全的端点（测试用）
ALLOW_TEST_ENDPOINTS=false
